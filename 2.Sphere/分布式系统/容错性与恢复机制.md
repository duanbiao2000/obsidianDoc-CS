### 一、 失败优先设计 (Failure-Oriented Design)
- **核心思想**: 假设系统中任何组件都随时可能失败，从设计之初就主动规划故障场景及其恢复路径。
- **实践落地**:
    - **故障建模**: 识别并列出所有潜在的故障点（如网络分区、节点宕机、API超时）。
    - **故障注入**: 在测试环境中使用Chaos Monkey、Toxiproxy等工具主动注入故障，验证系统的容错能力。
    - **设计恢复路径**:
        - **冗余 (Redundancy)**: 部署多个服务实例或数据副本。
        - **降级 (Graceful Degradation)**: 当非核心功能失败时，提供有损服务而非完全不可用。
        - **快速失败 (Fail Fast)**: 依赖的服务不可用时，立即失败并返回错误，避免资源长时间占用。

### 二、 自愈机制 (Self-healing Systems)
- **核心思想**: 系统应具备自动检测故障并从中恢复的能力，最大限度减少人工干预。
- **实践落地**:
    - **健康检查 (Health Checks)**: 通过探针（如Kubernetes的Liveness/Readiness Probes）持续监控服务健康状况。
    - **自动重启/替换**: 当服务实例不健康时，由编排系统（如Kubernetes）自动重启或替换。
    - **Leader选举**: 在主从架构中，当主节点失效时，通过Raft、Paxos等共识算法自动选举出新的主节点。
    - **数据自动修复**: 分布式存储系统（如HDFS, Ceph）能自动检测损坏的数据副本，并从其他健康副本中恢复。

### 三、 幂等 + 重试 + 退避 (Idempotency + Retry + Backoff)
- **核心思想**: 这是构建可靠远程过程调用（RPC）的黄金组合，用于应对网络不可靠性。
- **实践落地**:
    - **幂等性 (Idempotency)**:
        - **定义**: 同一操作执行一次或多次，其结果应完全相同。
        - **实现**:
            - **唯一请求ID**: 客户端生成唯一ID，服务端记录并检查，对重复ID的请求直接返回上次结果。
            - **数据库唯一约束**: 利用数据库的`UNIQUE`约束防止重复插入。
            - **状态机**: 操作基于前置状态，若状态已变更则不重复执行。
    - **重试 (Retry)**:
        - **定义**: 当请求因瞬时故障（如网络抖动）失败时，客户端自动重新发起请求。
    - **退避 (Backoff)**:
        - **定义**: 重试时不应立即、连续地发起，而应增加等待间隔，避免对已过载的服务造成雪崩效应。
        - **实现**:
            - **指数退避 (Exponential Backoff)**: 每次重试的等待时间以指数级增长（如1s, 2s, 4s, 8s）。
            - **增加随机抖动 (Jitter)**: 在退避时间上增加一个随机值，避免大量客户端在同一时刻同步重试。