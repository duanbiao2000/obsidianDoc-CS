---
aliases: null
date: 2025-10-24 00:13
tags: null
source: null
update: null
rating: null
---
好的，遵照您的指示，这是根据提供的《12-Factor App 技术指南》笔记内容生成的 Anki 闪卡。

# 12-Factor App 技术指南

### 核心价值与目标
12-Factor App的核心价值是什么?::构建可扩展、可维护、可部署的现代云原生应用。
12-Factor App的底层逻辑是什么?::环境无关性、进程无状态、声明式配置。

---

## 12个核心要素详解

### 1. 代码库 (Codebase)
### 代码库的核心原则 #card-reverse
一个应用对应一个Git仓库，多个不同的部署（如生产、预发布环境）使用同一份代码库。

### 代码库的反模式
多仓库拼凑一个应用属于什么模式?::反模式，会导致版本同步困难和配置混乱。
同一仓库部署多个不相关的应用属于什么模式?::反模式，会导致配置污染。

### 2. 依赖 (Dependencies)
### 依赖的核心原则 #card
12-Factor App要求如何处理依赖？
必须显式声明、版本锁定，并通过工具进行环境隔离。

### 依赖管理的实践
在Node.js项目中，为什么推荐使用 `npm ci` 而不是 `npm install`?::`npm ci` 会严格按照 `package-lock.json` 文件安装依赖，确保了环境的一致性和可复现性。
依赖版本不固定的风险是什么?::可能导致开发环境和生产环境因依赖版本不一致而出现问题，例如 `"express": "^4.0.0"` 可能会在不同时间安装不同的次要版本。
应用不应依赖于系统中隐式存在的依赖，所有依赖都必须通过{依赖清单文件}显式声明。

### 3. 配置 (Config)
### 配置的核心原则 #card
配置（Config）应该存储在{环境变量}中，与代码严格分离。

### 配置管理的实践
检验配置是否正确分离的标准是什么?::代码库可以立即开源，而不会泄露任何敏感信息（如密钥、密码）。
本地开发时，通常使用什么文件来管理环境变量?::`.env` 文件，并且该文件必须被添加到 `.gitignore` 中。

### 4. 后端服务 (Backing Services)
### 后端服务的核心原则 #card-reverse
将数据库、缓存、消息队列等所有后端服务都视作【附加资源】，可以通过修改配置URL进行无缝切换，而无需修改代码。

### 5. 构建、发布、运行 (Build, Release, Run)
### 构建、发布、运行的阶段划分
12-Factor App将部署过程严格分离为哪三个阶段?::构建（Build）、发布（Release）、运行（Run）。
构建（Build）阶段做什么?::将代码转换成可执行包，包括编译代码、安装依赖。
发布（Release）阶段做什么?::将构建阶段的产物与当前部署的配置相结合，形成一个不可变的、可部署的版本。
运行（Run）阶段做什么?::在执行环境中启动发布阶段生成的部署包。
“构建一次，运行多次”指的是什么原则?::{构建、发布、运行}严格分离的原则。

### 6. 进程 (Processes)
### 进程的核心原则 #card-reverse
应用进程应该是【无状态的】（Stateless），任何需要持久化的状态都必须存储在后端服务（如数据库或Redis）中。

### 无状态进程的实践
为什么应用进程内不应存储会话（Session）?::因为这会导致进程有状态，当实例重启或水平扩展时，内存中的会札会丢失，影响用户体验。
无状态进程的优点是什么?::支持快速、可靠的水平扩缩容。

### 7. 端口绑定 (Port Binding)
### 端口绑定的核心原则 #card
12-Factor应用应该是{自我包含的}，并通过绑定端口来暴露其提供的服务，而不是依赖于外部的Web服务器注入。

在代码或容器中，监听地址通常被设置为 `0.0.0.0`，这是为什么?::为了绑定到所有网络接口，使得服务可以从容器外部或网络中的其他机器访问。

### 8. 并发 (Concurrency)
### 并发的核心原则 #card-reverse
应用应该通过【水平扩展进程】（Scale out via the process model）来处理并发，而不是依赖单个大进程内的多线程。

12-Factor应用如何划分不同类型的进程?::通常会分离为处理HTTP请求的Web进程和处理后台耗时任务的Worker进程。

### 9. 易处理 (Disposability)
### 易处理的核心原则
“易处理”或“可任意处置”原则对进程的启动和关闭有什么要求?::要求进程能够【快速启动】和实现【优雅关闭】。
什么是优雅关闭（Graceful Shutdown）?::进程在收到终止信号（如SIGTERM）后，应停止接受新请求，完成当前正在处理的请求，然后干净地退出。

### 10. 开发/生产环境等价 (Dev/Prod Parity)
### 开发/生产环境等价的核心原则
“开发/生产环境等价”原则的目标是什么?::尽可能保持开发、预发布和生产环境的一致性，以减少因环境差异导致的错误。
实现开发/生产环境等价的“三一致原则”是什么?::代码一致、依赖一致、架构一致。
在现代开发中，什么工具是实现开发/生产环境等价的最佳实践?::容器化技术，如Docker。

### 11. 日志 (Logs)
### 日志的核心原则 #card-reverse
应用不应该关心日志的存储和管理，而应将日志视为【事件流】，并将其输出到标准输出（stdout）或标准错误（stderr）。

### 日志的实践
为什么不推荐应用将日志写入本地文件?::因为在容器化和分布式环境中，本地文件难以收集、聚合和管理，并且在实例销毁时会丢失。
将日志输出到stdout后，由谁来负责收集、处理和存储?::执行环境或专门的日志收集工具（如Fluentd, Loki）。

### 12. 管理进程 (Admin Processes)
### 管理进程的核心原则
数据库迁移、数据清理等一次性管理任务应该如何运行?::应该作为一个【一次性进程】，在与主应用完全相同的环境中运行，共享相同的代码和配置。
在Kubernetes中，通常使用什么资源来执行一次性的管理任务?::Job。