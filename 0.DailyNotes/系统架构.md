
### 从敏捷视角解读 [[系统架构]]

这篇笔记为我们提供了架构的“蓝图”。在敏捷环境中，我们不追求一次性画出完美的最终蓝图，而是致力于构建一个**演进式（Evolutionary）的架构**。它应该像一座持续建设的城市，有统一的规划原则，但具体的建筑（功能）则根据居民（用户）的需求分阶段、分批次地建造和优化。

#### 1. 架构决策是整个团队的责任

*   **笔记提到**：架构是“指导其设计和演进的原则和约束”。
*   **我们的实践**:
    *   **架构不是“架构师”一个人的事，而是整个开发团队的共同责任**。我们每个人都应该是架构的守护者。
    *   重大的架构决策（例如，引入新的消息队列、拆分服务）应该在团队内部（可能包括产品负责人）进行开放讨论，并使用**架构决策记录（Architecture Decision Records, ADRs）** 来记录决策的背景、权衡和结果。这能确保知识的透明和传承。

#### 2. 将非功能性需求（NFRs）融入日常工作

*   **笔记提到**：架构旨在满足功能性和非功能性需求（性能、可扩展性、安全性等）。
*   **我们的实践**:
    *   **NFRs 必须是可见的、可度量的、可测试的**。我们应该将它们作为用户故事或验收标准明确地写在我们的待办事项列表（Backlog）中。
    *   **示例故事**：“作为用户，我希望在500并发下，订单提交的响应时间低于200ms。”
    *   我们可以引入**“适应度函数测试”（Fitness Function Tests）**，编写自动化测试来持续验证我们的架构是否满足关键的 NFRs，防止架构在演进过程中发生“腐化”。

#### 3. 务实地选择架构风格

笔记中列出的架构风格都是我们工具箱里的工具，没有好坏之分，只有是否适合。

*   **[[单体架构]]**:
    *   **敏捷视角**：对于新项目或业务探索阶段，**单体是启动速度最快、验证想法成本最低的选择**。不要过早优化！一个内部模块化良好的单体，远胜于一个混乱的微服务集群。

*   **[[微服务架构]]**:
    *   **敏捷视角**：当团队规模扩大、单体应用的复杂性确实成为交付瓶颈时，才是转向微服务的时机。它能提升团队的自治性和独立部署能力，但会带来巨大的**运维复杂性税（Operational Complexity Tax）**。采用微服务前，我们必须问自己：“我们的自动化测试、CI/CD 和监控能力准备好了吗？”

*   **[[事件驱动架构]]**:
    *   **敏捷视角**：这是实现服务间**高度解耦**的强大模式，非常适合需要高扩展性和韧性的异步场景。但它会使系统行为变得不那么直观，对我们的**可观测性（Observability）** 能力（日志、追踪、度量）提出了极高的要求。

*   **[[领域驱动设计 (DDD)]]**:
    *   **敏捷视角**：DDD 的核心价值在于**通过“通用语言”（Ubiquitous Language）拉近业务专家和开发团队的距离**，确保我们构建的软件能精准反映复杂的业务领域。这对于减少沟通误解、构建真正有价值的软件至关重要。在处理复杂业务时，我们应该积极实践 DDD。

### 总结：我们的架构原则

1.  **演进优于“大设计”**：我们的架构应支持增量式变更，而不是一开始就追求完美。
2.  **简单是默认选项**：始终选择能解决当前问题的最简单的方案（YAGNI - You Ain't Gonna Need It）。
3.  **决策需有记录**：使用 ADRs 来记录重要的架构权衡，让未来有迹可循。
4.  **质量内建于流程**：通过自动化测试和适应度函数来守护我们的架构质量。
5.  **沟通是核心**：架构是团队沟通的媒介，利用 DDD 等工具促进与业务的有效对话。

